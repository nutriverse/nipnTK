<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Age heaping • nipnTK</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Age heaping">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-success" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nipnTK</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/nipnTK.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rl.html">Check ranges and legal values</a></li>
    <li><a class="dropdown-item" href="../articles/sp.html">Identify outliers using scatter plots</a></li>
    <li><a class="dropdown-item" href="../articles/flagging.html">Identify outliers using flags</a></li>
    <li><a class="dropdown-item" href="../articles/ad.html">Assess distributions of variables and indices</a></li>
    <li><a class="dropdown-item" href="../articles/dp.html">Assess digit preference</a></li>
    <li><a class="dropdown-item" href="../articles/ah.html">Assess age heaping</a></li>
    <li><a class="dropdown-item" href="../articles/sr.html">Assess sex ratio</a></li>
    <li><a class="dropdown-item" href="../articles/as.html">Assess age and sex distributions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mastodon.social/@nutriverse"><span class="fa fab fa-mastodon fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutriverse/nipnTK/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Age heaping</h1>
                        <h4 data-toc-skip class="author">Mark Myatt</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nutriverse/nipnTK/blob/main/vignettes/ah.Rmd" class="external-link"><code>vignettes/ah.Rmd</code></a></small>
      <div class="d-none name"><code>ah.Rmd</code></div>
    </div>

    
    
<p>This section depends on some of the material presented in the section
relating to digit preference.</p>
<p>Age heaping is the tendency to report children’s ages to the nearest
year or adults’ ages to the nearest multiple of five or ten years. Age
heaping is very common. This is a major reason why data from nutritional
anthropometry surveys is often analysed and reported using broad age
groups.</p>
<p>We will retrieve a survey dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"dp.ex02.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code></pre></div>
<p>The file <strong>dp.ex02.csv</strong> is a comma-separated-value
(CSV) file containing anthropometric data from a SMART survey in Kabul,
Afghanistan.</p>
<p>The first few records in this dataset can be seen using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span></code></pre></div>
<p>This returns:</p>
<pre><code><span><span class="co">#&gt;   psu age sex weight height muac oedema</span></span>
<span><span class="co">#&gt; 1   1   6   1    7.3   65.0  146      2</span></span>
<span><span class="co">#&gt; 2   1  42   2   12.5   89.5  156      2</span></span>
<span><span class="co">#&gt; 3   1  23   1   10.6   78.1  149      2</span></span>
<span><span class="co">#&gt; 4   1  18   1   12.8   81.5  160      2</span></span>
<span><span class="co">#&gt; 5   1  52   1   12.1   87.3  152      2</span></span>
<span><span class="co">#&gt; 6   1  36   2   16.9   93.0  190      2</span></span></code></pre>
<div class="section level2">
<h2 id="summarising-tabulating-and-visualising-age-data">Summarising, tabulating, and visualising age data<a class="anchor" aria-label="anchor" href="#summarising-tabulating-and-visualising-age-data"></a>
</h2>
<p>The variable of interest is <strong>age</strong> (age in months):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;     6.0    18.0    30.0    30.4    42.0    59.0</span></span></code></pre></div>
<p>Tables can be difficult to use with ungrouped age data because there
are usually many different values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 </span></span>
<span><span class="co">#&gt; 10 17 25 13 19 23 38 11 11 17  9 14 26  9 17 14 24 12 31  8 13  9 21 14 38 14 </span></span>
<span><span class="co">#&gt; 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 </span></span>
<span><span class="co">#&gt; 16 23 22 18 57  8 13  9 11 12 19 10 13 14 12 14 44  6  9  6  5  8 12 13 12  8 </span></span>
<span><span class="co">#&gt; 58 59 </span></span>
<span><span class="co">#&gt; 13  9</span></span></code></pre></div>
<p>The <code><a href="../reference/fullTable.html">fullTable()</a></code> function from the NiPN data-quality
toolkit is preferred as this will include values with zero counts:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, values <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">59</span><span class="op">)</span></span>
<span><span class="co">#&gt;  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 </span></span>
<span><span class="co">#&gt; 10 17 25 13 19 23 38 11 11 17  9 14 26  9 17 14 24 12 31  8 13  9 21 14 38 14 </span></span>
<span><span class="co">#&gt; 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 </span></span>
<span><span class="co">#&gt; 16 23 22 18 57  8 13  9 11 12 19 10 13 14 12 14 44  6  9  6  5  8 12 13 12  8 </span></span>
<span><span class="co">#&gt; 58 59 </span></span>
<span><span class="co">#&gt; 13  9</span></span></code></pre></div>
<p>We used the <code><a href="../reference/fullTable.html">fullTable()</a></code> function here because it returns
a table containing cells for every value specified by the
<strong>values</strong> parameter. The returned table will also only
contain cells for the <strong>values</strong> specified by the values
parameter. The default for the <strong>values</strong> parameter is the
range of the variable being tabulated. This means that the values
parameter can be sometimes be omitted:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 </span></span>
<span><span class="co">#&gt; 10 17 25 13 19 23 38 11 11 17  9 14 26  9 17 14 24 12 31  8 13  9 21 14 38 14 </span></span>
<span><span class="co">#&gt; 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 </span></span>
<span><span class="co">#&gt; 16 23 22 18 57  8 13  9 11 12 19 10 13 14 12 14 44  6  9  6  5  8 12 13 12  8 </span></span>
<span><span class="co">#&gt; 58 59 </span></span>
<span><span class="co">#&gt; 13  9</span></span></code></pre></div>
<p>Omitting the <strong>values</strong> parameter only works reliably
for numeric variables containing whole numbers. If the variable being
tabulated is a character variable or is a numeric variable containing
one or more numbers with decimal places then you should specify the
<strong>values</strong> parameter.</p>
<p>A graphical analysis is usually more informative than a tabular
analysis:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, values <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">59</span><span class="op">)</span>, </span>
<span>        xlab <span class="op">=</span> <span class="st">"Age (months)"</span>, ylab <span class="op">=</span> <span class="st">"Frequency"</span>, las <span class="op">=</span> <span class="fl">3</span>, cex.names <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>We expect all ages to be present in roughly equal frequency or with
frequency reducing slowly with age due to mortality. We can see that
there is marked age-heaping at 12, 18, 24, 30, 36, and 48 months (see
figure above). This is very common when age is reported by mothers. This
is because of a tendency for mothers and other carers to round ages to
whole years or half years.</p>
<p>Note that we used <code>values = 6:59</code> with the
<code><a href="../reference/fullTable.html">fullTable()</a></code> function from the NiPN data quality toolkit. We
did this because it is the range of values that should be present in the
age variable.</p>
</div>
<div class="section level2">
<h2 id="age-heaping-in-children">Age heaping in children<a class="anchor" aria-label="anchor" href="#age-heaping-in-children"></a>
</h2>
<p>Age heaping can seriously affect survey results for indices that
include an age component (e.g. height- for-age and weight-for age). The
effect is important when there is systematic rounding up or systematic
rounding down. Systematic rounding can lead to bias. If rounding is
systematically down then indices will be biased upwards and prevalence
biased downwards. If rounding is systematically up then indices will be
biased downwards and prevalence biased upwards.</p>
<p>A useful way of looking at age heaping when age is recorded in months
is to examine the remainders when the ages are divided by 12.</p>
<p>The R language provides a special operator (%%) to help with
this:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rem</span> <span class="op">&lt;-</span> <span class="va">svy</span><span class="op">$</span><span class="va">age</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%%</a></span> <span class="fl">12</span></span>
<span><span class="va">remTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">rem</span>, values <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">remTable</span></span>
<span><span class="co">#&gt;   0   1   2   3   4   5   6   7   8   9  10  11 </span></span>
<span><span class="co">#&gt; 170  33  46  41  46  48 105  63  83  72  90  76</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="va">remTable</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="co">#&gt;         0         1         2         3         4         5         6         7 </span></span>
<span><span class="co">#&gt; 19.473081  3.780069  5.269187  4.696449  5.269187  5.498282 12.027491  7.216495 </span></span>
<span><span class="co">#&gt;         8         9        10        11 </span></span>
<span><span class="co">#&gt;  9.507446  8.247423 10.309278  8.705613</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="va">remTable</span>, xlab <span class="op">=</span> <span class="st">"Age (months) %% 12"</span>, ylab <span class="op">=</span> <span class="st">"Frequency"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">remTable</span> <span class="op">/</span> <span class="fl">12</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html" class="external-link">chisq.test</a></span><span class="op">(</span><span class="va">remTable</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chi-squared test for given probabilities</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  remTable</span></span>
<span><span class="co">#&gt; X-squared = 214.96, df = 11, p-value &lt; 2.2e-16</span></span></code></pre></div>
<p>The NiPN data quality toolkit provides an R language function called
<code><a href="../reference/ageHeaping.html">ageHeaping()</a></code> that performs this age-heaping analysis.
Applying this function to the example data:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ageHeaping.html">ageHeaping</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<p>This returns:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Age-heaping Analysis</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:    Remainder of svy$age / 12</span></span>
<span><span class="co">#&gt; X-squared = 214.9588, df = 11, p-value = 0.0000</span></span></code></pre>
<p>The output of the <code><a href="../reference/ageHeaping.html">ageHeaping()</a></code> function can be saved for
later use:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ah12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ageHeaping.html">ageHeaping</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span></code></pre></div>
<p>The saved output contains the Chi-squared test and frequency tables
of the final digits (counts and percentages). These can be accessed
using:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ah12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Age-heaping Analysis</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:    Remainder of svy$age / 12</span></span>
<span><span class="co">#&gt; X-squared = 214.9588, df = 11, p-value = 0.0000</span></span>
<span><span class="va">ah12</span><span class="op">$</span><span class="va">X2</span></span>
<span><span class="co">#&gt; X-squared </span></span>
<span><span class="co">#&gt;  214.9588</span></span>
<span><span class="va">ah12</span><span class="op">$</span><span class="va">df</span></span>
<span><span class="co">#&gt; df </span></span>
<span><span class="co">#&gt; 11</span></span>
<span><span class="va">ah12</span><span class="op">$</span><span class="va">p</span></span>
<span><span class="co">#&gt; [1] 5.791598e-40</span></span>
<span><span class="va">ah12</span><span class="op">$</span><span class="va">tab</span></span>
<span><span class="co">#&gt; Remainder of svy$age / 12</span></span>
<span><span class="co">#&gt;   0   1   2   3   4   5   6   7   8   9  10  11 </span></span>
<span><span class="co">#&gt; 170  33  46  41  46  48 105  63  83  72  90  76</span></span>
<span><span class="va">ah12</span><span class="op">$</span><span class="va">pct</span></span>
<span><span class="co">#&gt; Remainder of svy$age / 12</span></span>
<span><span class="co">#&gt;    0    1    2    3    4    5    6    7    8    9   10   11 </span></span>
<span><span class="co">#&gt; 19.5  3.8  5.3  4.7  5.3  5.5 12.0  7.2  9.5  8.2 10.3  8.7</span></span></code></pre></div>
<p>The saved results may also be plotted:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ah12</span>, main <span class="op">=</span> <span class="st">"Age-heaping (remainder of age / 12)"</span><span class="op">)</span></span></code></pre></div>
<p>The resulting plot is shown below.</p>
<p><img src="ah_files/figure-html/unnamed-chunk-17-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>The <code><a href="../reference/ageHeaping.html">ageHeaping()</a></code> function assumes that you want to
examine the remainder after dividing by twelve. This is useful when
working with ages that are recorded in months. It may also be useful to
use other divisors, such as examining the remainder after dividing by
six:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ah6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ageHeaping.html">ageHeaping</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, divisor <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ah6</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Age-heaping Analysis</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:    Remainder of svy$age / 6</span></span>
<span><span class="co">#&gt; X-squared = 145.0275, df = 5, p-value = 0.0000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ah6</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-18-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>This shows the extent of age heaping at whole and half-years (see
figure above).</p>
</div>
<div class="section level2">
<h2 id="age-heaping-in-adults">Age heaping in adults<a class="anchor" aria-label="anchor" href="#age-heaping-in-adults"></a>
</h2>
<p>Using ten and five as divisors can be useful when dealing with data
for adults in which ages are recorded in whole years. For example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"ah.ex01.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="va">ah.ex01</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span></code></pre></div>
<p>The file <strong>ah.ex01.csv</strong> is a comma-separated-value
(CSV) file containing anthropometric data from a Rapid Assessment Method
for Older People (RAM-OP) survey in the Dadaab refugee camp in Garissa,
Kenya. This is a survey of people aged sixty years and older.</p>
<p>The variable of interest is age (age in years):</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;     6.0    18.0    30.0    30.4    42.0    59.0</span></span></code></pre></div>
<p>Care should be exercised when specifying the <strong>divisor</strong>
to use in the analysis of age heaping. Not all calendars use base ten.
Amongst Han Chinese, for example, age heaping may occur with a
twelve-year cycle corresponding to preferred animal years in the Chinese
calendar. An analysis of age heaping that concentrates on specific
digits (e.g. zero and five) or on decimal intervals will not be
appropriate in all populations. It is advisable, therefore to use simple
tabulation and visualisation techniques to heap decide an appropriate
<strong>divisor</strong>.</p>
<p>With the example data:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;     6.0    18.0    30.0    30.4    42.0    59.0</span></span>
<span><span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="co">#&gt;  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 </span></span>
<span><span class="co">#&gt; 10 17 25 13 19 23 38 11 11 17  9 14 26  9 17 14 24 12 31  8 13  9 21 14 38 14 </span></span>
<span><span class="co">#&gt; 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 </span></span>
<span><span class="co">#&gt; 16 23 22 18 57  8 13  9 11 12 19 10 13 14 12 14 44  6  9  6  5  8 12 13 12  8 </span></span>
<span><span class="co">#&gt; 58 59 </span></span>
<span><span class="co">#&gt; 13  9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/fullTable.html">fullTable</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span><span class="op">)</span>, </span>
<span>        xlab <span class="op">=</span> <span class="st">"Age (years)"</span>, ylab <span class="op">=</span> <span class="st">"Frequency"</span>, las <span class="op">=</span> <span class="fl">3</span>, cex.names <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-22-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>shows age-heaping at decades and half-decades (see figure above). In
this survey using a <strong>divisor</strong> of 10 would be
appropriate:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ah10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ageHeaping.html">ageHeaping</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, divisor <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ah10</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Age-heaping Analysis</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:    Remainder of svy$age / 10</span></span>
<span><span class="co">#&gt; X-squared = 70.31042, df = 9, p-value = 0.0000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ah10</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-23-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>There is pronounced age heaping at decades and, to a lesser extent,
half-decades in these data (see figure above).</p>
<p>It may also be useful to use other divisors, such as examining the
remainder after dividing by five:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ah5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ageHeaping.html">ageHeaping</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, divisor <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ah5</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Age-heaping Analysis</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:    Remainder of svy$age / 5</span></span>
<span><span class="co">#&gt; X-squared = 10.39633, df = 4, p-value = 0.0343</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ah5</span><span class="op">)</span></span></code></pre></div>
<p><img src="ah_files/figure-html/unnamed-chunk-24-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>This shows the extent of age heaping at whole and half decades (see
figure above).</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Myatt, Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
