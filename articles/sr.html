<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sex ratio • nipnTK</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sex ratio">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-51ZQ0EXXM4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-51ZQ0EXXM4');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-success" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nipnTK</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/nipnTK.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rl.html">Check ranges and legal values</a></li>
    <li><a class="dropdown-item" href="../articles/sp.html">Identify outliers using scatter plots</a></li>
    <li><a class="dropdown-item" href="../articles/flagging.html">Identify outliers using flags</a></li>
    <li><a class="dropdown-item" href="../articles/ad.html">Assess distributions of variables and indices</a></li>
    <li><a class="dropdown-item" href="../articles/dp.html">Assess digit preference</a></li>
    <li><a class="dropdown-item" href="../articles/ah.html">Assess age heaping</a></li>
    <li><a class="dropdown-item" href="../articles/sr.html">Assess sex ratio</a></li>
    <li><a class="dropdown-item" href="../articles/as.html">Assess age and sex distributions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://nutriverse.io" aria-label="Website"><span class="fa fa-globe"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mastodon.social/@nutriverse" aria-label="Mastodon"><span class="fa fab fa-mastodon fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/nutriverse.io" aria-label="Bluesky"><span class="fa fab fa-bluesky fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/company/nutriverse-community" aria-label="LinkedIn"><span class="fa fab fa-linkedin fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nutriverse/nipnTK/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="sr_files/kePrint-0.0.1/kePrint.js"></script><link href="sr_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sex ratio</h1>
                        <h4 data-toc-skip class="author">Mark Myatt</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nutriverse/nipnTK/blob/v0.2.2/vignettes/sr.Rmd" class="external-link"><code>vignettes/sr.Rmd</code></a></small>
      <div class="d-none name"><code>sr.Rmd</code></div>
    </div>

    
    
<p>The male to female sex ratio test checks whether the ratio of the
number of males to the number of females in a survey sample is similar
to an expected ratio. The expected male to female sex ratio can be
calculated from census or similar data. If there is no expected value
then it is usually assumed that there should be equal numbers of males
and females in the survey sample. This is usually true for children and
young adults but may not be true for older adults.</p>
<p>We will retrieve a survey dataset:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"dp.ex02.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   psu age sex weight height muac oedema</span></span>
<span><span class="co">#&gt; 1   1   6   1    7.3   65.0  146      2</span></span>
<span><span class="co">#&gt; 2   1  42   2   12.5   89.5  156      2</span></span>
<span><span class="co">#&gt; 3   1  23   1   10.6   78.1  149      2</span></span>
<span><span class="co">#&gt; 4   1  18   1   12.8   81.5  160      2</span></span>
<span><span class="co">#&gt; 5   1  52   1   12.1   87.3  152      2</span></span>
<span><span class="co">#&gt; 6   1  36   2   16.9   93.0  190      2</span></span></code></pre>
<p>The dataset <code>dp.ex02.csv</code> is a comma-separated-value (CSV)
file containing anthropometric data from a SMART survey in Kabul,
Afghanistan.</p>
<p>It is reported that there are about 2.658 million boys and 2.508
million girls aged between zero and four years in Afghanistan (2012
estimates).</p>
<p>The male to female sex ratio is:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2.658</span> <span class="op">/</span> <span class="fl">2.508</span></span></code></pre></div>
<p>which is:</p>
<pre><code><span><span class="co">#&gt; [1] 1.059809</span></span></code></pre>
<p>It is often easier to work with the proportion of the population that
is male:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2.658</span> <span class="op">/</span> <span class="op">(</span><span class="fl">2.658</span> <span class="op">+</span> <span class="fl">2.508</span><span class="op">)</span></span></code></pre></div>
<p>which is:</p>
<pre><code><span><span class="co">#&gt; [1] 0.514518</span></span></code></pre>
<p>We compare this to the proportion of the sample that is male:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<p>this gives:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   1   2 </span></span>
<span><span class="co">#&gt; 438 435</span></span></code></pre>
<p>This table is more useful when the cell counts are expressed as
proportions:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>this gives:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         1         2 </span></span>
<span><span class="co">#&gt; 0.5017182 0.4982818</span></span></code></pre>
<p>A formal test can be made:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/prop.test.html" class="external-link">prop.test</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span>, p <span class="op">=</span> <span class="fl">0.514518</span><span class="op">)</span></span></code></pre></div>
<p>This returns:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  1-sample proportions test with continuity correction</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  table(svy$sex), null probability 0.514518</span></span>
<span><span class="co">#&gt; X-squared = 0.5225, df = 1, p-value = 0.4698</span></span>
<span><span class="co">#&gt; alternative hypothesis: true p is not equal to 0.514518</span></span>
<span><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span><span class="co">#&gt;  0.4680459 0.5353752</span></span>
<span><span class="co">#&gt; sample estimates:</span></span>
<span><span class="co">#&gt;         p </span></span>
<span><span class="co">#&gt; 0.5017182</span></span></code></pre>
<p>The male to female sex ratio (expressed as the proportion male) in
the example data is not significantly different from the expected male
to female sex ratio (expressed as the proportion male).</p>
<p>The NiPN data quality toolkit provides an R language function called
<code><a href="../reference/sexRatioTest.html">sexRatioTest()</a></code> that performs a sex ratio test:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sexRatioTest.html">sexRatioTest</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span>, codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.658</span>, <span class="fl">2.508</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>which returns:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5017</span></span>
<span><span class="co">#&gt; X-squared = 0.5225, p = 0.4698</span></span></code></pre>
<p>The codes used in the sex variable for male and female are specified
using the codes parameter. If (e.g.) <code>sex</code> were coded using
<strong>M</strong> and <strong>F</strong> then you would specify
<code>codes = c("M", "F")</code>.</p>
<p>Population data are specified using the <code>pop</code> parameter
(males then females). This can be specified as numbers or as a ratio.
The test above could have been specified as:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sexRatioTest.html">sexRatioTest</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span>, codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.059809</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5017</span></span>
<span><span class="co">#&gt; X-squared = 0.5225, p = 0.4698</span></span></code></pre></div>
<p>If (e.g.) you want to specify a one to one sex ratio then you would
use <code>pop = c(1, 1)</code>.</p>
<p>The observed sex ratio at birth is 1.06:1.00 (males to females). This
could be used to assess if selective abortion or female infanticide is
taking place although a large sample size (i.e. about n = 6200) is
required for such a test to have sufficient power.</p>
<div class="section level2">
<h2 id="analysis-by-age">Analysis by age<a class="anchor" aria-label="anchor" href="#analysis-by-age"></a>
</h2>
<p>The sex ratio test may be performed on each age group separately. You
can apply the sex ratio test to each age-group using the
<code><a href="https://rdrr.io/r/base/by.html" class="external-link">by()</a></code> function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span><span class="op">$</span><span class="va">ycag</span> <span class="op">&lt;-</span> <span class="fu">recode</span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, <span class="st">"6:17=1; 18:29=2; 30:41=3; 42:53=4; 54:59=5"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span>, <span class="va">svy</span><span class="op">$</span><span class="va">ycag</span>, <span class="va">sexRatioTest</span>, codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.658</span>, <span class="fl">2.508</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; svy$ycag: 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.4879</span></span>
<span><span class="co">#&gt; X-squared = 0.4845, p = 0.4864</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; svy$ycag: 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5152</span></span>
<span><span class="co">#&gt; X-squared = 0.0000, p = 1.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; svy$ycag: 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5228</span></span>
<span><span class="co">#&gt; X-squared = 0.0374, p = 0.8466</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; svy$ycag: 4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.4875</span></span>
<span><span class="co">#&gt; X-squared = 0.3657, p = 0.5454</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; svy$ycag: 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5145</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.4627</span></span>
<span><span class="co">#&gt; X-squared = 0.5280, p = 0.4674</span></span></code></pre></div>
<p>Note that the variable <code>ycag</code> created above holds the
year-centred-age-group.</p>
<p>This approach assumes that the sex ratio is independent of age.</p>
<p>An approach that does not make this assumption is to use the numbers
of male and female children in the same age-ranges in the population
taken from census data.</p>
<p>A useful source of census data is the <a href="https://www.census.gov/data-tools/demo/idb/informationGateway.php" class="external-link">United
States Census Bureau’s International Data Base</a>:</p>
<p><a href="https://www.census.gov/data-tools/demo/idb/informationGateway.php" class="external-link uri">https://www.census.gov/data-tools/demo/idb/informationGateway.php</a></p>
<p>This source gives the following estimates for Afghanistan in
2016:</p>
<table class="table table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
Number Male
</th>
<th style="text-align:right;">
<div class="line-block">Number</div>
Femal
</th>
<th style="text-align:right;">
s| Proportion M
</th>
<th style="text-align:right;">
le| Propotion Fe
</th>
<th style="text-align:left;">
ale|Male-to-Female Sex R
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
594602
</td>
<td style="text-align:right;">
573956
</td>
<td style="text-align:right;">
0.5088
</td>
<td style="text-align:right;">
0.4912
</td>
<td style="text-align:left;">
1.04:1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
550593
</td>
<td style="text-align:right;">
533579
</td>
<td style="text-align:right;">
0.5078
</td>
<td style="text-align:right;">
0.4922
</td>
<td style="text-align:left;">
1.03:1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
526827
</td>
<td style="text-align:right;">
510479
</td>
<td style="text-align:right;">
0.5079
</td>
<td style="text-align:right;">
0.4921
</td>
<td style="text-align:left;">
1.03:1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
509048
</td>
<td style="text-align:right;">
493185
</td>
<td style="text-align:right;">
0.5079
</td>
<td style="text-align:right;">
0.4921
</td>
<td style="text-align:left;">
1.03:1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
493521
</td>
<td style="text-align:right;">
478137
</td>
<td style="text-align:right;">
0.5079
</td>
<td style="text-align:right;">
0.4921
</td>
<td style="text-align:left;">
1.03:1.00
</td>
</tr>
</tbody>
</table>
<p>We need to ensure we use the same age-ranges as the census:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span><span class="op">$</span><span class="va">ageGroup</span> <span class="op">&lt;-</span> <span class="fu">recode</span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">age</span>, <span class="st">"0:11=0; 12:23=1; 24:35=2; 36:47=3; 48:59=4"</span><span class="op">)</span></span></code></pre></div>
<p>and then test the sex ratio in each age group separately:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">sexRatioTest</span>(svy<span class="sc">$</span>sex[svy<span class="sc">$</span>ageGroup <span class="sc">==</span> <span class="dv">0</span>], <span class="at">pop =</span> <span class="fu">c</span>(<span class="dv">594602</span>, <span class="dv">573956</span>)) <span class="fu">sexRatioTest</span>(svy<span class="sc">$</span>sex[svy<span class="sc">$</span>ageGroup <span class="sc">==</span> <span class="dv">1</span>], <span class="at">pop =</span> <span class="fu">c</span>(<span class="dv">550593</span>, <span class="dv">533579</span>)) <span class="fu">sexRatioTest</span>(svy<span class="sc">$</span>sex[svy<span class="sc">$</span>ageGroup <span class="sc">==</span> <span class="dv">2</span>], <span class="at">pop =</span> <span class="fu">c</span>(<span class="dv">526827</span>, <span class="dv">510479</span>)) <span class="fu">sexRatioTest</span>(svy<span class="sc">$</span>sex[svy<span class="sc">$</span>ageGroup <span class="sc">==</span> <span class="dv">3</span>], <span class="at">pop =</span> <span class="fu">c</span>(<span class="dv">509048</span>, <span class="dv">493185</span>)) <span class="fu">sexRatioTest</span>(svy<span class="sc">$</span>sex[svy<span class="sc">$</span>ageGroup <span class="sc">==</span> <span class="dv">4</span>], <span class="at">pop =</span> <span class="fu">c</span>(<span class="dv">493521</span>, <span class="dv">478137</span>))</span></code></pre></div>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5088</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5047</span></span>
<span><span class="co">#&gt; X-squared = 0.0000, p = 1.0000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5078</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.4901</span></span>
<span><span class="co">#&gt; X-squared = 0.1885, p = 0.6642</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5079</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5374</span></span>
<span><span class="co">#&gt; X-squared = 0.6800, p = 0.4096</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5079</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.5052</span></span>
<span><span class="co">#&gt; X-squared = 0.0000, p = 0.9978</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.5079</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.4552</span></span>
<span><span class="co">#&gt; X-squared = 1.4098, p = 0.2351</span></span></code></pre>
<p>All of these tests find no significant differences between the
observed and expected sex ratios. It should be noted that some (or all)
of the tests might be based on small sample sizes:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">ageGroup</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   0   1   2   3   4 </span></span>
<span><span class="co">#&gt; 107 202 227 192 145</span></span></code></pre></div>
<p>and may, therefore, be able to detect only large differences.</p>
</div>
<div class="section level2">
<h2 id="sex-ratios-in-adults">Sex ratios in adults<a class="anchor" aria-label="anchor" href="#sex-ratios-in-adults"></a>
</h2>
<p>With data from children we usually expect something like a one to one
male to female sex ratio. This will not usually be the case with adults,
especially older adults.</p>
<p>We will retrieve a survey dataset:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"ah.ex01.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">svy</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   psu camp block age sex weight height demispan muac oedema</span></span>
<span><span class="co">#&gt; 1   1  IFO   A01  90   1   40.8  159.3     77.2 20.0      2</span></span>
<span><span class="co">#&gt; 2   1  IFO   A01  60   2   69.8  155.3     78.3 35.3      2</span></span>
<span><span class="co">#&gt; 3   1  IFO   A01  63   2   51.7  156.8     80.5 25.5      2</span></span>
<span><span class="co">#&gt; 4   1  IFO   A01  74   2   61.1  158.9     83.5 27.0      2</span></span>
<span><span class="co">#&gt; 5   1  IFO   A01  65   2   55.1  156.9     85.5 24.5      2</span></span>
<span><span class="co">#&gt; 6   1  IFO   A01  62   2   56.7  158.1     86.3 26.1      2</span></span></code></pre>
<p>The dataset <code>ah.ex01</code> is a comma-separated-value (CSV)
file containing anthropometry data from a Rapid Assessment Method for
Older People (RAM-OP) survey in the Dadaab refugee camps in Garissa,
Kenya. This is a survey of older people, defined as people aged sixty
years and older.</p>
<p>With this type of survey it is usually possible to use camp
administration data to find the expected male to female sex ratio. This
information was not given in the RAM-OP survey report.</p>
<p>The camp population is predominantly Somali. It is reported that
there are 188 thousand men and 220 thousand women aged sixty years and
older in Somalia (2010 estimates). The sex ratio is:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">188</span> <span class="op">/</span> <span class="fl">220</span></span></code></pre></div>
<p>which is:</p>
<pre><code><span><span class="co">#&gt; [1] 0.8545455</span></span></code></pre>
<p>The expected proportion of the population that is male is:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">188</span> <span class="op">/</span> <span class="op">(</span><span class="fl">188</span> <span class="op">+</span> <span class="fl">220</span><span class="op">)</span></span></code></pre></div>
<p>which is:</p>
<pre><code><span><span class="co">#&gt; [1] 0.4607843</span></span></code></pre>
<p>The proportion of the sample that is male:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>is:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        1        2 </span></span>
<span><span class="co">#&gt; 0.381113 0.618887</span></span></code></pre>
<p>This looks to be much smaller than the expected proportion. The sex
ratio test:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sexRatioTest.html">sexRatioTest</a></span><span class="op">(</span><span class="va">svy</span><span class="op">$</span><span class="va">sex</span>, codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">188</span>, <span class="fl">220</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>reports:</p>
<pre><code><span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Sex Ratio Test</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expected proportion male = 0.4608</span></span>
<span><span class="co">#&gt; Observed proportion male = 0.3811</span></span>
<span><span class="co">#&gt; X-squared = 14.8305, p = 0.0001</span></span></code></pre>
<p>The proportion of males in the sample is significantly smaller than
we expected.</p>
<p>This result could be due to the extraordinary nature of the
population (e.g. the camp population could really have very many more
older women than older men). It could also due to a selection bias in
the survey. In this example, men were more likely than women to be away
from home during the day and a household sample taken during the day
would have systematically excluded the more active members of the male
population.</p>
<p>Note that the sex ratio test only applies to population surveys. If
surveys focus on (e.g.) carers of small children then the observed male
to female sex ratio is likely to be strongly biased towards women. In
such cases it is not sensible to apply a sex ratio test.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Myatt, Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
